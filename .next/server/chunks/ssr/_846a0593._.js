module.exports=[87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},10815,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(72131),f=a.i(69240),g=a.i(40695),h=a.i(16686);function i(){let a=(0,d.useRouter)(),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)(!1);(0,e.useEffect)(()=>{let a=(0,f.createClient)();(async()=>{try{let{data:{user:b}}=await a.auth.getUser();j(b)}catch(a){console.log("No user logged in")}finally{l(!1)}})();let{data:{subscription:b}}=a.auth.onAuthStateChange((a,b)=>{j(b?.user||null)});return()=>{b?.unsubscribe()}},[]);let o=async()=>{let b=(0,f.createClient)();await b.auth.signOut(),j(null),a.push("/")};return(0,b.jsx)("nav",{className:"sticky top-0 z-50 w-full bg-background/95 backdrop-blur border-b border-border animate-slide-in",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)(c.default,{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center animate-pulse-glow",children:(0,b.jsx)(h.Music,{className:"w-6 h-6 text-primary-foreground"})}),(0,b.jsx)("span",{className:"font-bold text-lg bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"MusiansHub"})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,b.jsx)(c.default,{href:"/",className:"text-sm font-medium hover:text-primary transition-colors",children:"Home"}),(0,b.jsx)(c.default,{href:"/events",className:"text-sm font-medium hover:text-primary transition-colors",children:"Events"}),(0,b.jsx)(c.default,{href:"/dashboard",className:"text-sm font-medium hover:text-primary transition-colors",children:"Dashboard"})]}),(0,b.jsx)("div",{className:"hidden md:flex items-center gap-4",children:k||i?(0,b.jsx)(g.Button,{onClick:o,size:"sm",variant:"outline",children:"Sign Out"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:"/auth/login",children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Sign In"})}),(0,b.jsx)(c.default,{href:"/auth/sign-up",children:(0,b.jsx)(g.Button,{size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90",children:"Sign Up"})})]})}),(0,b.jsx)("button",{onClick:()=>n(!m),className:"md:hidden p-2 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m&&(0,b.jsxs)("div",{className:"md:hidden pb-4 space-y-3 animate-fade-up",children:[(0,b.jsx)(c.default,{href:"/",className:"block text-sm font-medium hover:text-primary transition-colors py-2",children:"Home"}),(0,b.jsx)(c.default,{href:"/events",className:"block text-sm font-medium hover:text-primary transition-colors py-2",children:"Events"}),(0,b.jsx)(c.default,{href:"/dashboard",className:"block text-sm font-medium hover:text-primary transition-colors py-2",children:"Dashboard"}),(0,b.jsx)("div",{className:"pt-2 space-y-2",children:k||i?(0,b.jsx)(g.Button,{onClick:o,size:"sm",variant:"outline",className:"w-full bg-transparent",children:"Sign Out"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:"/auth/login",children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"w-full bg-transparent",children:"Sign In"})}),(0,b.jsx)(c.default,{href:"/auth/sign-up",children:(0,b.jsx)(g.Button,{size:"sm",className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Sign Up"})})]})})]})]})})}a.s(["default",()=>i])},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},72028,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10815),e=a.i(69240),f=a.i(40695),g=a.i(3130),h=a.i(38246),i=a.i(41675);let j=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var k=a.i(60246),l=a.i(33508),m=a.i(97895);function n(){let[a,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(new Set),[u,v]=(0,c.useState)(new Set),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)({full_name:"",email:"",phone:""});(0,c.useEffect)(()=>{let a=(0,e.createClient)();(async()=>{try{let{data:{user:b}}=await a.auth.getUser();r(b);let{data:c,error:d}=await a.from("events").select(`
            id, 
            title, 
            description, 
            date, 
            location, 
            image_url, 
            capacity, 
            user_id,
            users!events_user_id_fkey(id, full_name, avatar_url, email),
            event_registrations(count)
          `).order("date",{ascending:!0});if(d){console.log("[v0] Query error:",d);let{data:b}=await a.from("events").select("id, title, description, date, location, image_url, capacity, user_id").order("date",{ascending:!0});n(b||[])}else n(c||[]);if(b){let{data:c,error:d}=await a.from("event_registrations").select("event_id").eq("user_id",b.id);if(d)throw d;t(new Set(c?.map(a=>a.event_id)||[]))}}catch(a){console.error("Error fetching events:",a)}finally{p(!1)}})()},[]);let A=async a=>{if(a.preventDefault(),!q||!w)return;let b=(0,e.createClient)();v(a=>new Set([...a,w.id]));try{let{error:a}=await b.from("event_registrations").insert({event_id:w.id,user_id:q.id});if(a)throw a;try{await fetch("/api/send-registration-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:w.id,userId:q.id,eventTitle:w.title,eventDate:(0,m.formatDate)(w.date),registrantName:y.full_name,registrantEmail:y.email,registrantPhone:y.phone,creatorEmail:w.users?.email})})}catch(a){console.error("Error sending notification:",a)}t(a=>new Set([...a,w.id])),x(null),z({full_name:"",email:"",phone:""});let{data:c}=await b.from("events").select(`
          id, 
          title, 
          description, 
          date, 
          location, 
          image_url, 
          capacity, 
          user_id,
          users!events_user_id_fkey(id, full_name, avatar_url, email),
          event_registrations(count)
        `).order("date",{ascending:!0});n(c||[])}catch(a){console.error("Error registering for event:",a)}finally{v(a=>{let b=new Set(a);return b.delete(w.id),b})}},B=async a=>{if(!q)return;let b=(0,e.createClient)();v(b=>new Set([...b,a]));try{let{error:c}=await b.from("event_registrations").delete().eq("event_id",a).eq("user_id",q.id);if(c)throw c;t(b=>{let c=new Set(b);return c.delete(a),c})}catch(a){console.error("Error unregistering:",a)}finally{v(b=>{let c=new Set(b);return c.delete(a),c})}};return(0,b.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/5",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("section",{className:"py-20 px-4",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-16 animate-fade-up",children:[(0,b.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-4",children:"Upcoming Events"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Connect, collaborate, and create with musicians in your area"})]}),o?(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):a.length>0?(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((a,c)=>{let d=a.event_registrations?.[0]?.count||0,e=s.has(a.id),h=u.has(a.id);return(0,b.jsxs)(g.Card,{className:"overflow-hidden hover:border-primary/40 transition-all duration-300 hover:shadow-lg animate-fade-up border-primary/20",style:{animationDelay:`${.1*c}s`},children:[a.image_url?(0,b.jsx)("div",{className:"h-48 overflow-hidden bg-muted",children:(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:a.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",crossOrigin:"anonymous",onError:a=>{a.currentTarget.src="/placeholder.svg"}})}):(0,b.jsx)("div",{className:"h-48 bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-muted-foreground",children:"No image"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-3 line-clamp-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(i.Calendar,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("span",{children:(0,m.formatDate)(a.date)})]}),a.location&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(j,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("span",{children:a.location})]}),a.capacity&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.Users,{className:"w-4 h-4 text-primary"}),(0,b.jsxs)("span",{children:[d," / ",a.capacity," registered"]})]})]}),a.users&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6 pb-6 border-b border-border",children:[a.users.avatar_url&&(0,b.jsx)("img",{src:a.users.avatar_url||"/placeholder.svg",alt:a.users.full_name,className:"w-8 h-8 rounded-full object-cover",crossOrigin:"anonymous",onError:a=>{a.currentTarget.src="/placeholder.svg"}}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["by ",a.users.full_name]})]}),e?(0,b.jsx)(f.Button,{onClick:()=>B(a.id),disabled:h,className:"w-full bg-muted text-foreground hover:bg-muted/80",children:h?"Processing...":"Unregister"}):(0,b.jsx)(f.Button,{onClick:()=>(a=>{if(!q){window.location.href="/auth/login";return}x(a),z({full_name:q.user_metadata?.full_name||"",email:q.email||"",phone:""})})(a),disabled:h,className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90",children:h?"Processing...":"Register Now"})]})]},a.id)})}):(0,b.jsxs)(g.Card,{className:"p-12 text-center border-dashed",children:[(0,b.jsx)(i.Calendar,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No events available yet"}),(0,b.jsx)(h.default,{href:"/",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Back to Home"})})]})]})}),w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-3 md:p-4 z-50 animate-fade-up",children:(0,b.jsxs)(g.Card,{className:"w-full max-w-md p-4 md:p-6 border-primary/20 rounded-lg md:rounded-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,b.jsx)("h3",{className:"text-lg md:text-xl font-bold",children:"Register for Event"}),(0,b.jsx)("button",{onClick:()=>{x(null),z({full_name:"",email:"",phone:""})},className:"hover:opacity-70",children:(0,b.jsx)(l.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm md:text-base mb-2",children:w.title}),(0,b.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:(0,m.formatDate)(w.date)})]}),(0,b.jsxs)("form",{onSubmit:A,className:"space-y-3 md:space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Full Name"}),(0,b.jsx)("input",{type:"text",value:y.full_name,onChange:a=>z({...y,full_name:a.target.value}),placeholder:"Your full name",className:"w-full px-3 md:px-4 py-2 rounded-lg border border-input bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:y.email,onChange:a=>z({...y,email:a.target.value}),placeholder:"Your email",className:"w-full px-3 md:px-4 py-2 rounded-lg border border-input bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Phone Number"}),(0,b.jsx)("input",{type:"tel",value:y.phone,onChange:a=>z({...y,phone:a.target.value}),placeholder:"Your phone number",className:"w-full px-3 md:px-4 py-2 rounded-lg border border-input bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm",required:!0})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2 md:pt-4",children:[(0,b.jsx)(f.Button,{type:"submit",className:"flex-1 bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-sm",children:"Complete Registration"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",className:"flex-1 bg-transparent text-sm",onClick:()=>{x(null),z({full_name:"",email:"",phone:""})},children:"Cancel"})]})]})]})})]})}a.s(["default",()=>n],72028)}];

//# sourceMappingURL=_846a0593._.js.map